:-module(main,[go/0]).
go:-current_prolog_flag(argv,_G350),write(_G350),nl,'0'(_G350).
'1'(_G757,_G758,_G759):-open(_G757,read,_G763),get_char(_G763,_G766),'2'(_G763,_G766,_G770),close(_G763),'3'(_G770,_G758,_G759).
'0'(_G1171):-use_module(wumpus), (_G1171=[_G1175,_G1178,_G1181]->open(_G1175,read,_G1189),get_char(_G1189,_G1192),'2'(_G1189,_G1192,_G1196),close(_G1189),atom_number(_G1178,_G1201),atom_number(_G1181,_G1204),catch(call_with_time_limit(10, ('3'(_G1196,_G1201,_G1204),halt)),time_limit_exceeded, (write('TIME LIMIT EXCEEDED'),nl,'4'(_G1196),nl));write('wumpusrun takes 3 arguments: filename XS YS\n')),halt.
'2'(_G2574,_G2575,_G2576):-_G2575=end_of_file->_G2576=[];_G2576=[_G2587|_G2588],'5'(_G2574,_G2575,_G2595,_G2587),'2'(_G2574,_G2595,_G2588).
'5'(_G2984,_G2985,_G2986,_G2987):-_G2985='\n'->_G2987=[],get_char(_G2984,_G2986);_G2985=end_of_file->_G2987=[],_G2986=_G2985;'6'(_G3019,_G2985),_G2987=[_G3019|_G3023],get_char(_G2984,_G3029),'5'(_G2984,_G3029,_G2986,_G3023).
'3'(_G3904,_G3905,_G3906):-'7'(_G3904,_G3905,_G3906,_G3911), ((_G3911=pit;_G3911=wall;_G3911=wumpus)->write('Invalid starting position '),write((_G3905,_G3906)),nl,halt;true),length(_G3904,_G3951),_G3904=[_G3953|_G3954],length(_G3953,_G3960), ('8'(_G3904,_G3960),'9'(_G3904,_G3966)->true;write('Invalid map'),nl,halt),once(initialState(_G3951,_G3960,_G3905,_G3906,_G3989)),'3'(_G3904,_G3966,_G3905,_G3906,_G3951,_G3960,_G3989,0,0).
'3'(_G5689,_G5690,_G5691,_G5692,_G5693,_G5694,_G5695,_G5696,_G5697):-'10'(_G5695,_G5700,_G5701,_G5702),_G5707 is _G5696+1,_G5713 is _G5697+_G5702,'0'(_G5701,_G5691,_G5692,north,_G5689,_G5690,_G5722,_G5723), (_G5723=yes->'11'(_G5689,_G5691,_G5692,_G5701,_G5722,_G5707,_G5713);once(updateState(_G5700,_G5701,_G5722,_G5742)),'3'(_G5689,_G5690,_G5691,_G5692,_G5693,_G5694,_G5742,_G5707,_G5713)).
'10'(_G6391,_G6392,_G6393,_G6394):-once(guess(_G6391,_G6392,_G6393)),'12'(_G6393,_G6394), (_G6394=<100,'13'(_G6393)->true;write('INVALID GUESS: '),write(_G6393),nl,write('ENERGY = '),write(_G6394),nl,halt).
'13'([]).
'13'([east|_G7476]):-'13'(_G7476).
'13'([north|_G7517]):-'13'(_G7517).
'13'([west|_G3374]):-'13'(_G3374).
'13'([south|_G3398]):-'13'(_G3398).
'13'([shoot|_G3439]):-'13'(_G3439).
'8'([],_G3480).
'8'([_G3500|_G3501],_G3504):-length(_G3500,_G3504),'8'(_G3501,_G3504).
'11'(_G3653,_G3654,_G3655,_G3656,_G3657,_G3658,_G3659):-'4'(_G3653),nl,write('Starting at ('),write(_G3654),write(','),write(_G3655),write(')'),nl,write('Successfully killed wumpus with plan: '),write(_G3656),nl,write('Feedback: '),write(_G3657),nl,write('ATTEMPTS = '),write(_G3658),nl,write('ENERGY = '),write(_G3659),nl.
'12'(_G5553,_G5554):-'12'(_G5553,0,_G5554).
'12'([],_G5607,_G5607).
'12'([_G5632|_G5633],_G5636,_G5637):- (_G5632=shoot->_G5642=5;_G5642=1),_G5657 is _G5636+_G5642,'12'(_G5633,_G5657,_G5637).
'0'([],_G6105,_G6106,_G6107,_G6108,_G6109,[],no).
'0'([_G6155|_G6156],_G6162,_G6163,_G6164,_G6165,_G6166,[_G6158|_G6159],_G6168):-'14'(_G6155,_G6162,_G6163,_G6164,_G6165,_G6166,_G6176,_G6177,_G6178,_G6158), ((_G6158=pit;_G6158=wumpus)->_G6159=[],_G6168=no;_G6158=hit->_G6159=[],_G6168=yes;'0'(_G6156,_G6176,_G6177,_G6178,_G6165,_G6166,_G6159,_G6168)).
'14'(shoot,_G7057,_G7058,_G7059,_G7060,_G7061,_G7057,_G7058,_G7059,_G7065):-!,'15'(_G7060,_G7057,_G7058,_G7059,_G7065).
'14'(_G4810,_G4811,_G4812,_G4813,_G4814,_G4815,_G4816,_G4817,_G4810,_G4818):-'16'(_G4810,_G4811,_G4812,_G4819,_G4820),'7'(_G4814,_G4819,_G4820,_G4821),'7'(_G4815,_G4819,_G4820,_G4818), (_G4821=wall->_G4816=_G4811,_G4817=_G4812;_G4816=_G4819,_G4817=_G4820).
'16'(north,_G5337,_G5338,_G5339,_G5340):-_G5339=_G5337,_G5340 is _G5338-1.
'16'(south,_G5580,_G5581,_G5582,_G5583):-_G5582=_G5580,_G5583 is _G5581+1.
'16'(east,_G5823,_G5824,_G5825,_G5826):-_G5825 is _G5823+1,_G5826=_G5824.
'16'(west,_G6066,_G6067,_G6068,_G6069):-_G6068 is _G6066-1,_G6069=_G6067.
'7'(_G6308,_G6309,_G6310,_G6311):-'17'(_G6308,_G6310,_G6315),'17'(_G6315,_G6309,_G6311),!.
'7'(_G6502,_G6503,_G6504,wall).
'17'(_G6533,_G6534,_G6535):-'17'(_G6533,_G6534,1,_G6535).
'17'([_G6596|_G6597],_G6600,_G6601,_G6602):-_G6600>=_G6601, (_G6600=_G6601->_G6602=_G6596;_G6619 is _G6601+1,'17'(_G6597,_G6600,_G6619,_G6602)).
'15'(_G6273,_G6274,_G6275,_G6276,_G6277):-'7'(_G6273,_G6274,_G6275,_G6278), (_G6278=wumpus->_G6277=hit;_G6278=wall->_G6277=miss;'16'(_G6276,_G6274,_G6275,_G6298,_G6299),'15'(_G6273,_G6298,_G6299,_G6276,_G6277)).
'18'([]).
'18'([wall|_G6740]):-'18'(_G6740).
'9'([_G6780|_G6781],_G6784):-'19'([_G6780|_G6781],_G6790,_G6791),length(_G6780,_G6794),_G6799 is _G6794+2,length(_G6802,_G6799),'18'(_G6802),'20'([_G6780|_G6781],_G6811),append([_G6802|_G6811],[_G6802],_G6821),'21'(_G6821,1,_G6790,_G6791,_G6784).
'19'(_G7372,_G7373,_G7374):-'19'(_G7372,1,_G7373,_G7374).
'19'([_G7435|_G7436],_G7439,_G7440,_G7441):-member(wumpus,_G7435)->_G7440=_G7439,'22'(_G7435,1,_G7441);_G7462 is _G7439+1,'19'(_G7436,_G7462,_G7440,_G7441).
'22'([_G7853|_G7854],_G7857,_G7858):-_G7853=wumpus->_G7858=_G7857;_G7872 is _G7857+1,'22'(_G7854,_G7872,_G7858).
'20'([],[]).
'20'([_G8244|_G8245],[_G8247|_G8248]):-append([wall|_G8244],[wall],_G8247),'20'(_G8245,_G8248).
'21'([_G8410,_G8413],_G8417,_G8418,_G8419,[]).
'21'([_G8452,_G8455,_G8458|_G8459],_G8465,_G8466,_G8467,[_G8461|_G8462]):-'23'(_G8452,_G8455,_G8458,_G8465,1,_G8466,_G8467,_G8461),_G8482 is _G8465+1,'21'([_G8455,_G8458|_G8459],_G8482,_G8466,_G8467,_G8462).
'23'([_G8716,_G8719],[_G8722,_G8725],[_G8728,_G8731],_G8737,_G8738,_G8739,_G8740,[]).
'23'([_G8785,_G8788,_G8791|_G8792],[_G8794,_G8797,_G8800|_G8801],[_G8803,_G8806,_G8809|_G8810],_G8818,_G8819,_G8820,_G8821,[_G8812|_G8813]):- (_G8797=pit->_G8812=pit;_G8797=wall->_G8812=wall;_G8797=wumpus->_G8812=wumpus;abs(_G8818-_G8820)+abs(_G8819-_G8821)=:=1->_G8812=stench;abs(_G8818-_G8820)+abs(_G8819-_G8821)=<3->_G8812=smell; (_G8788=pit;_G8794=pit;_G8800=pit;_G8806=pit)->_G8812=damp;_G8812=empty),_G8946 is _G8819+1,'23'([_G8788,_G8791|_G8792],[_G8797,_G8800|_G8801],[_G8806,_G8809|_G8810],_G8818,_G8946,_G8820,_G8821,_G8813).
'4'([]).
'4'([_G10720|_G10721]):-'24'(_G10720),nl,'4'(_G10721).
'24'([]).
'24'([_G10898|_G10899]):-'6'(_G10898,_G10904),write(_G10904),'24'(_G10899).
'6'(unknown,' ').
'6'(empty,'.').
'6'(wall,#).
'6'(pit,'P').
'6'(wumpus,'W').
'6'(damp,d).
'6'(smell,?).
'6'(stench,!).
'25'([[empty,wall,empty,empty,empty,empty,empty,empty],[empty,wall,empty,empty,empty,empty,empty,empty],[empty,empty,pit,wall,empty,wumpus,empty,pit],[empty,empty,empty,pit,wall,empty,empty,empty],[empty,wall,empty,empty,empty,empty,empty,empty],[empty,wall,empty,empty,empty,empty,empty,empty],[empty,wall,empty,empty,empty,empty,empty,empty]]).
